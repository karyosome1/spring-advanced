# SPRING ADVANCED

## Lv 1. ì½”ë“œ ê°œì„  `í•„ìˆ˜`

### **1. ì½”ë“œ ê°œì„  í€´ì¦ˆ -** Early Return

ì¡°ê±´ì— ë§ì§€ ì•ŠëŠ” ê²½ìš° ì¦‰ì‹œ ë¦¬í„´í•˜ì—¬, ë¶ˆí•„ìš”í•œ ë¡œì§ì˜ ì‹¤í–‰ì„ ë°©ì§€í•˜ê³  ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤. íŒ¨í‚¤ì§€ package org.example.expert.domain.auth.service; ì˜ AuthService í´ë˜ìŠ¤ì— ìˆëŠ” signup() ì¤‘ ì•„ë˜ì˜ ì½”ë“œ ë¶€ë¶„ì˜ ìœ„ì¹˜ë¥¼ ë¦¬íŒ©í† ë§í•´ì„œ í•´ë‹¹ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ìƒí™©ì¼ ë•Œ, `passwordEncoder`ì˜ `encode()` ë™ì‘ì´ ë¶ˆí•„ìš”í•˜ê²Œ ì¼ì–´ë‚˜ì§€ ì•Šê²Œ ì½”ë“œë¥¼ ê°œì„ í•´ì£¼ì„¸ìš”. 

```
if (userRepository.existsByEmail(signupRequest.getEmail())) {
    throw new InvalidRequestException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ì…ë‹ˆë‹¤.");
}
```

### **2. ë¦¬íŒ©í† ë§ í€´ì¦ˆ - ë¶ˆí•„ìš”í•œ `if-else` í”¼í•˜ê¸°**

ë³µì¡í•œ `if-else` êµ¬ì¡°ëŠ” ì½”ë“œì˜ ê°€ë…ì„±ì„ ë–¨ì–´ëœ¨ë¦¬ê³  ìœ ì§€ë³´ìˆ˜ë¥¼ ì–´ë µê²Œ ë§Œë“­ë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ `else` ë¸”ë¡ì„ ì—†ì•  ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ í•©ë‹ˆë‹¤.
íŒ¨í‚¤ì§€ package org.example.expert.client; ì˜ WeatherClient í´ë˜ìŠ¤ì— ìˆëŠ” getTodayWeather() ì¤‘ ì•„ë˜ì˜ ì½”ë“œ ë¶€ë¶„ì„ ë¦¬íŒ©í† ë§í•´ì£¼ì„¸ìš”.

```
WeatherDto[] weatherArray = responseEntity.getBody();
if (!HttpStatus.OK.equals(responseEntity.getStatusCode())) {
    throw new ServerException("ë‚ ì”¨ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìƒíƒœ ì½”ë“œ: " + responseEntity.getStatusCode());
} else {
    if (weatherArray == null || weatherArray.length == 0) {
        throw new ServerException("ë‚ ì”¨ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
    }
}
```


### **3. ì½”ë“œ ê°œì„  í€´ì¦ˆ - Validation**
íŒ¨í‚¤ì§€ package org.example.expert.domain.user.service; ì˜ UserService í´ë˜ìŠ¤ì— ìˆëŠ” changePassword() ì¤‘ ì•„ë˜ ì½”ë“œ ë¶€ë¶„ì„ í•´ë‹¹ APIì˜ ìš”ì²­ DTOì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ê°œì„ í•´ì£¼ì„¸ìš”.  
ğŸ’¡Tip: 'org.springframework.boot:spring-boot-starter-validation' ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•´ì£¼ì„¸ìš”!


```
if (userChangePasswordRequest.getNewPassword().length() < 8 ||
        !userChangePasswordRequest.getNewPassword().matches(".*\\d.*") ||
        !userChangePasswordRequest.getNewPassword().matches(".*[A-Z].*")) {
    throw new InvalidRequestException("ìƒˆ ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•˜ê³ , ìˆ«ìì™€ ëŒ€ë¬¸ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.");
}
```



## Lv 2. N+1 ë¬¸ì œ  `í•„ìˆ˜`

- `TodoController`ì™€ `TodoService`ë¥¼ í†µí•´ `Todo` ê´€ë ¨ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
- ì—¬ê¸°ì„œ N+1 ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì‹œë‚˜ë¦¬ì˜¤ëŠ” `getTodos` ë©”ì„œë“œì—ì„œ ëª¨ë“  Todoë¥¼ ì¡°íšŒí•  ë•Œ, ê° Todoì™€ ì—°ê´€ëœ ë°ì´í„°ë¥¼ ê°œë³„ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.
- ìš”êµ¬ì‚¬í•­:
    - JPQL `fetch join`ì„ ì‚¬ìš©í•˜ì—¬ N+1 ë¬¸ì œë¥¼ í•´ê²°í•˜ê³  ìˆëŠ” `TodoRepository`ê°€ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ë™ì¼í•œ ë™ì‘ì„ í•˜ëŠ” `@EntityGraph` ê¸°ë°˜ì˜ êµ¬í˜„ìœ¼ë¡œ ìˆ˜ì •í•´ì£¼ì„¸ìš”.


## Lv 3. í…ŒìŠ¤íŠ¸ì½”ë“œ ì—°ìŠµ `í•„ìˆ˜`

### **1. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì—°ìŠµ - 1 (ì˜ˆìƒëŒ€ë¡œ ì„±ê³µí•˜ëŠ”ì§€ì— ëŒ€í•œ ì¼€ì´ìŠ¤ì…ë‹ˆë‹¤.)**

í…ŒìŠ¤íŠ¸ íŒ¨í‚¤ì§€ package org.example.expert.config; ì˜ PassEncoderTest í´ë˜ìŠ¤ì— ìˆëŠ” matches_ë©”ì„œë“œê°€_ì •ìƒì ìœ¼ë¡œ_ë™ì‘í•œë‹¤() í…ŒìŠ¤íŠ¸ê°€ ì˜ë„ëŒ€ë¡œ ì„±ê³µí•  ìˆ˜ ìˆê²Œ ìˆ˜ì •í•´ ì£¼ì„¸ìš”.


### **2. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì—°ìŠµ - 2 (ì˜ˆìƒëŒ€ë¡œ ì˜ˆì™¸ì²˜ë¦¬ í•˜ëŠ”ì§€ì— ëŒ€í•œ ì¼€ì´ìŠ¤ì…ë‹ˆë‹¤.)**

- 1ë²ˆ ì¼€ì´ìŠ¤  
  í…ŒìŠ¤íŠ¸ íŒ¨í‚¤ì§€ `package org.example.expert.domain.manager.service;` ì˜ `ManagerServiceTest` ì˜ í´ë˜ìŠ¤ì— ìˆëŠ” `manager_ëª©ë¡_ì¡°íšŒ_ì‹œ_Todoê°€_ì—†ë‹¤ë©´_NPE_ì—ëŸ¬ë¥¼_ë˜ì§„ë‹¤()` í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí•˜ê³  ì»¨í…ìŠ¤íŠ¸ì™€ ì¼ì¹˜í•˜ë„ë¡ **í…ŒìŠ¤íŠ¸ ì½”ë“œ**ì™€ **í…ŒìŠ¤íŠ¸ ì½”ë“œ ë©”ì„œë“œ ëª…**ì„ ìˆ˜ì •í•´ ì£¼ì„¸ìš”.  
  ğŸ’¡Hint!: ë˜ì§€ëŠ” ì—ëŸ¬ê°€ `NullPointerException`ì´ ì•„ë‹ˆë¯€ë¡œ ë©”ì„œë“œëª… ë˜í•œ ìˆ˜ì •ë˜ì–´ì•¼ í•´ìš”!


- 2ë²ˆ ì¼€ì´ìŠ¤  
  í…ŒìŠ¤íŠ¸ íŒ¨í‚¤ì§€ org.example.expert.domain.comment.service; ì˜ CommentServiceTest ì˜ í´ë˜ìŠ¤ì— ìˆëŠ” comment_ë“±ë¡_ì¤‘_í• ì¼ì„_ì°¾ì§€_ëª»í•´_ì—ëŸ¬ê°€_ë°œìƒí•œë‹¤() í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí•  ìˆ˜ ìˆë„ë¡ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìˆ˜ì •í•´ ì£¼ì„¸ìš”.  


- 3ë²ˆ ì¼€ì´ìŠ¤  
  í…ŒìŠ¤íŠ¸ íŒ¨í‚¤ì§€ org.example.expert.domain.manager.serviceì˜ ManagerServiceTest í´ë˜ìŠ¤ì— ìˆëŠ” todoì˜_userê°€_nullì¸_ê²½ìš°_ì˜ˆì™¸ê°€_ë°œìƒí•œë‹¤() í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí•  ìˆ˜ ìˆë„ë¡ ì„œë¹„ìŠ¤ ë¡œì§ì„ ìˆ˜ì •í•´ ì£¼ì„¸ìš”.


## Lv 4. API ë¡œê¹…  `ì„ íƒ`
### **1. Interceptorì™€ AOPë¥¼ í™œìš©í•œ API ë¡œê¹…**

- **í‚¤ì›Œë“œ : Interceptor ë˜ëŠ” AOPë¥¼ í™œìš©í•©ë‹ˆë‹¤.**
- ì–´ë“œë¯¼ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” íŠ¹ì • APIì—ëŠ” ì ‘ê·¼í•  ë•Œë§ˆë‹¤ ì ‘ê·¼ ë¡œê·¸ë¥¼ ê¸°ë¡í•´ì•¼ í•©ë‹ˆë‹¤.

**ìš”êµ¬ì‚¬í•­:**

1. ì–´ë“œë¯¼ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ì˜ˆìš”.
    - `org.example.expert.domain.comment.controller.CommentAdminController` í´ë˜ìŠ¤ì˜ `deleteComment()`
    - `org.example.expert.domain.user.controller.UserAdminController` í´ë˜ìŠ¤ì˜ `changeUserRole()`  



**ë¡œê¹… êµ¬í˜„ ë°©ë²•:**
1. **Interceptor**ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•˜ê¸°
    - ìš”ì²­ ì •ë³´(`HttpServletRequest`)ë¥¼ ì‚¬ì „ ì²˜ë¦¬í•©ë‹ˆë‹¤.
    - ì–´ë“œë¯¼ ê¶Œí•œ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì—¬ ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ìì˜ ì ‘ê·¼ì„ ì°¨ë‹¨í•©ë‹ˆë‹¤.
    - ì¸ì¦ ì„±ê³µ ì‹œ, ìš”ì²­ ì‹œê°ê³¼ URLì„ ë¡œê¹…í•˜ë„ë¡ êµ¬í˜„í•˜ì„¸ìš”.
2. **AOP**ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•˜ê¸°
    - ì–´ë“œë¯¼ API ë©”ì„œë“œ ì‹¤í–‰ ì „í›„ì— ìš”ì²­/ì‘ë‹µ ë°ì´í„°ë¥¼ ë¡œê¹…í•©ë‹ˆë‹¤.
    - ë¡œê¹… ë‚´ìš©ì—ëŠ” ë‹¤ìŒì´ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤:
        - ìš”ì²­í•œ ì‚¬ìš©ìì˜ ID
        - API ìš”ì²­ ì‹œê°
        - API ìš”ì²­ URL
        - ìš”ì²­ ë³¸ë¬¸(`RequestBody`)
        - ì‘ë‹µ ë³¸ë¬¸(`ResponseBody`)
3. **ì„¸ë¶€ êµ¬í˜„ ê°€ì´ë“œ**
    - **Interceptor**:
        - ì–´ë“œë¯¼ ì¸ì¦ ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
        - ì¸ì¦ë˜ì§€ ì•Šì€ ê²½ìš° ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.
    - **AOP**:
        - `@Around` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì–´ë“œë¯¼ API ë©”ì„œë“œ ì‹¤í–‰ ì „í›„ì— ìš”ì²­/ì‘ë‹µ ë°ì´í„°ë¥¼ ë¡œê¹…í•©ë‹ˆë‹¤.
        - ìš”ì²­ ë³¸ë¬¸ê³¼ ì‘ë‹µ ë³¸ë¬¸ì€ JSON í˜•ì‹ìœ¼ë¡œ ê¸°ë¡í•˜ì„¸ìš”.
    - ë¡œê¹…ì€ `Logger` í´ë˜ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ê¸°ë¡í•©ë‹ˆë‹¤.

## Lv 5. ìœ„ ì œì‹œëœ ê¸°ëŠ¥ ì´ì™¸ â€˜ë‚´â€™ê°€ ì •ì˜í•œ ë¬¸ì œì™€ í•´ê²° ê³¼ì • `ì„ íƒ`

ğŸ“Œ ì •í•´ì§„ ì •ë‹µì€ ì—†ìŠµë‹ˆë‹¤. ìì‹ ë§Œì˜ ìƒê°ì„ ì½”ë“œì— ë‹´ì•„ë³´ì„¸ìš”!


```java
1. [ë¬¸ì œ ì¸ì‹ ë° ì •ì˜]

2. [í•´ê²° ë°©ì•ˆ]
	2-1. [ì˜ì‚¬ê²°ì • ê³¼ì •]
	2-2. [í•´ê²° ê³¼ì •]
	
3. [í•´ê²° ì™„ë£Œ]
	3-1. [íšŒê³ ]
	3-2. [ì „í›„ ë°ì´í„° ë¹„êµ]
```


ë²„ê·¸ë‚˜ ì—ëŸ¬ ë¿ë§Œ ì•„ë‹ˆë¼, ì½”ë“œì˜ ë¦¬íŒ©í† ë§ í˜¹ì€ êµ¬ì¡° ê°œì„  ë˜í•œ ë¬¸ì œì— í¬í•¨ë©ë‹ˆë‹¤.

1. ì½”ë“œë¥¼ ê¼¼ê¼¼í•˜ê²Œ ì‚´í´ë³´ê³ , ê°œì„  ê°€ëŠ¥ì„±ì´ ìˆëŠ” ë¬¸ì œë¥¼ ì„ ì •í•©ë‹ˆë‹¤.
2. ë¬¸ì œë¥¼ ì •ì˜í•©ë‹ˆë‹¤.
3. í•´ê²° ê³¼ì •ì„ ê¸°ë¡í•©ë‹ˆë‹¤.
4. í•´ê²° í›„ íšŒê³ ë¥¼ ì§„í–‰í•´, ì–´ë–¤ ë¶€ë¶„ì´ ë‚˜ì•„ì¡ŒëŠ”ì§€ ë¬¸ì„œë¡œ ë‚¨ê¹ë‹ˆë‹¤.

---

- ê³¼ì œ ì§„í–‰ ë°©ë²•
    - ìœ„ ê³¼ì •ì„ ë¬¸ì„œë¡œ ë‚¨ê¹ë‹ˆë‹¤. ì–´ë–¤ í˜•íƒœë“  ìƒê´€ì—†ìŠµë‹ˆë‹¤. ìœ„ í”„ë ˆì„ì›Œí¬ë¥¼ ì ìš©í•˜ë˜, ë‚˜ì˜ ë…¼ë¦¬ë¥¼ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì„¤ëª…í•´ë³´ëŠ” ê²ƒì´ ê³¼ì œì˜ í•µì‹¬ì…ë‹ˆë‹¤.


## Lv 6. í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ `ì„ íƒ`

í…ŒìŠ¤íŠ¸ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ëŠ” `README.md`ì— ì´ë¯¸ì§€ë¡œ ì²¨ë¶€í•´ì£¼ì„¸ìš”!

- í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ì˜ ì¢…ë¥˜
    - í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ëŠ” ì¢…ë¥˜ê°€ ë§ì´ ìˆì§€ë§Œ, ì¼ë°˜ì ìœ¼ë¡œ ì•„ë˜ ë‘ê°€ì§€ë¥¼ ì¤‘ì ì ìœ¼ë¡œ í™•ì¸í•´ìš”.
    - **Line Coverage**
        - Line CoverageëŠ” í…ŒìŠ¤íŠ¸ê°€ ì†ŒìŠ¤ ì½”ë“œì˜ ëª‡ í¼ì„¼íŠ¸ë¥¼ ì‹¤í–‰í–ˆëŠ”ì§€ë¥¼ ì¸¡ì •í•˜ëŠ” ì§€í‘œì˜ˆìš”.
        - ì½”ë“œë¥¼ í•œ ë²ˆì´ë¼ë„ ì‹¤í–‰í•˜ë©´ í•´ë‹¹ ë¼ì¸ì€ ì»¤ë²„ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼ë¼ìš”.
        - ì´ ì»¤ë²„ë¦¬ì§€ë¥¼ í†µí•´ í…ŒìŠ¤íŠ¸ê°€ ì½”ë“œì˜ ê° ë¶€ë¶„ì„ ì–¼ë§ˆë‚˜ ë§ì´ ì˜ ë‹¤ë£¨ê³  ìˆëŠ”ì§€ íŒŒì•…í•  ìˆ˜ ìˆì–´ìš”.
    - **Condition Coverage**
        - Condition CoverageëŠ” ê°œë³„ ì¡°ê±´ì‹ì´ ì°¸ê³¼ ê±°ì§“ìœ¼ë¡œ í‰ê°€ë˜ëŠ” ê²½ìš°ë¥¼ ëª¨ë‘ í…ŒìŠ¤íŠ¸í–ˆëŠ”ì§€ë¥¼ ì¸¡ì •í•˜ëŠ” ì§€í‘œì˜ˆìš”.
            - ì¦‰, ì¡°ê±´ë¬¸ ì•ˆì— ìˆëŠ” ëª¨ë“  ì¡°ê±´ë“¤ì´ ê°ê° ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë˜ì–´ì•¼ í•œë‹¤ëŠ” ëœ»ì´ì—ìš”.
        - ë³µí•© ì¡°ê±´ì´ ìˆëŠ” ê²½ìš° ê° ì„œë¸Œ ì¡°ê±´ì´ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë˜ì–´ì•¼ í•´ìš”.
            - ì˜ˆë¥¼ ë“¤ì–´, ì¡°ê±´ë¬¸ `(A && B)`ê°€ ìˆì„ ë•Œ, Aì™€ B ê°ê°ì´ ì°¸ê³¼ ê±°ì§“ì¸ ê²½ìš°ë¥¼ ëª¨ë‘ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì´ ëª©í‘œì˜ˆìš”.